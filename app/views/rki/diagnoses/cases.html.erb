<h1>Total cases of <%= @diagnosis.illness %></h1>


  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">First name</th>
        <th scope="col"scope="col">Last name</th>
        <th scope="col">Gender</th>
        <th scope="col">Birthdate</th>
        <th scope="col">Place of residence</th>
        <th scope="col">Diagnosis</th>
        <th scope="col">Confirmed at</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @diagnosis.cases.each do |case_data| %>
        <tr>
            <td><%= case_data.first_name %></td>
            <td><%= case_data.last_name %></td>
            <td><%= case_data.gender %></td>
            <td><%= case_data.birthdate %></td>
            <td><%= case_data.place_of_residence %></td>
            <td><%= case_data.diagnosis.illness %></td>
            <td><%= case_data.confirmed_at %></td>
        </tr>
      <% end %>

    </tbody>
  </table>

  <hr>
  <br>

  <!-- Statistik einfÃ¼gen-->
  <h4 style="text-align:center;">Total cases by / within </h4>
  <div class="card-group">

    <!-- Confirmed -->
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Confirmed and unconfirmed</h5>
        <p>Unconfirmed: <%= unconfirmed_cases = @diagnosis.cases.unconfirmed.where(created_at: Date.today.all_day).count %></p>
        <p>Confirmed: <%= confirmed_cases = @diagnosis.cases.confirmed.where(created_at: Date.today.all_day).count %></p>
      </div>
    </div>

    <!-- District -->
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">District</h5>
        <p><%= District.find(1).name%> (<%= Case.where('District_ID =?', 1).count %>)</p>
        <p><%= District.find(2).name%> (<%= Case.where('District_ID =?', 2).count %>)</p>
        <p><%= District.find(3).name%> (<%= Case.where('District_ID =?', 3).count %>)</p>
      </div>
    </div>

    <!-- Today -->
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Today (<%= Case.where('created_at >=?', Date.today).count %>)</h5>
      </div>
    </div>

    <!-- 24h -->
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Last 24 hours (<%= Case.where('created_at >=?', 24.hours.ago).count %>)</h5>
      </div>
    </div>

    <!-- Week -->
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Last seven days (<%= Case.where('created_at >=?', 1.week.ago).count %>)</h5>
        <div class ="table-responsive">
          <table class="card-table table">
            <thead>
              <tr>
                <th scope="col">First name</th>
                <th scope="col"scope="col">Last name</th>
                <th scope="col">Gender</th>
                <th scope="col">Birthdate</th>
                <th scope="col">Place of residence</th>
                <th scope="col">Diagnosis</th>
                <th scope="col">Confirmed at</th>
              </tr>
            </thead>

            <tbody>
              <% Case.where('created_at >=?', 1.week.ago).each do |case_week| %>
                <tr>
                  <td><%= case_week.first_name %></td>
                  <td><%= case_week.last_name %></td>
                  <td><%= case_week.gender %></td>
                  <td><%= case_week.birthdate %></td>
                  <td><%= case_week.place_of_residence %></td>
                  <td><%= case_week.diagnosis.illness %></td>
                  <td><%= case_week.confirmed_at %></td>
                </tr>
              <% end %>
        </div>
      </div>
    </div>

  </div>
